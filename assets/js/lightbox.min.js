!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.lightbox=t()}(this,function(){return function(e,t){"use strict";var n={captions:!0,captionsSelector:"self",captionAttribute:"title",nav:"auto",navText:["&lsaquo;","&rsaquo;"],close:!0,closeText:"&times;",counter:!0,keyboard:!0,zoom:!0,zoomText:"&plus;",docClose:!1,swipeClose:!0,scroll:!1},i=[],o=null,a=[],l=0,r={},s=!1,c=null,d=document.createElement("div");d.setAttribute("role","dialog"),d.setAttribute("aria-hidden","true"),d.classList.add("lightbox-overlay"),document.getElementsByTagName("body")[0].appendChild(d);var u=document.createElement("div");u.classList.add("lightbox-slider"),d.appendChild(u);var m=document.createElement("button");m.setAttribute("type","button"),m.setAttribute("aria-label","Previous"),d.appendChild(m);var g=document.createElement("button");g.setAttribute("type","button"),g.setAttribute("aria-label","Next"),d.appendChild(g);var b=document.createElement("button");b.setAttribute("type","button"),b.setAttribute("aria-label","Close"),d.appendChild(b);var p=document.createElement("div");p.classList.add("lightbox-counter"),d.appendChild(p);var v=function(e,t){Object.keys(e).forEach(function(n){t[n]=e[n]})},f=function(e,t){if(void 0!==i[e]&&void 0!==a[e])if(a[e].getElementsByTagName("img")[0].hasAttribute("data-src")){var n=a[e].getElementsByTagName("figure")[0],o=n.getElementsByTagName("img")[0],l=n.getElementsByTagName("figcaption")[0];o.onload=function(){var e=n.querySelector(".lightbox-loader");n.removeChild(e),o.style.opacity="1",l&&(l.style.opacity="1")},o.setAttribute("src",o.getAttribute("data-src")),o.removeAttribute("data-src"),t&&t()}else t&&t()},h=function(){return"string"==typeof document.documentElement.style.transform},y=function(){var e=100*-l+"%";h()?u.style.transform="translate("+e+", 0)":u.style.left=e},E=function(){p.innerHTML=l+1+"/"+o},L=function(e){m.disabled=!1,g.disabled=!1,l===o-1?(m.disabled=!1,g.disabled=!0):0===l&&(m.disabled=!0,g.disabled=!1),n.nav?g.disabled||"left"===e?m.focus():g.focus():n.close&&b.focus()},x=function(e){f(e)},A=function(){l<o-1&&(l++,y(),E(),L(),x(l+1))},T=function(){l>0&&(l--,y(),E(),L(),x(l-1))},C=function(){for(var e=0,t=0,l=null,r=null,s=[],c=null,v=[];e<o;++e){a[e]=document.createElement("div"),a[e].classList.add("lightbox-content"),a[e].id="lightbox-content-"+e,(l=document.createElement("div")).classList.add("lightbox-figure-wrapper"),l.id="lightbox-figure-wrapper-"+e,(r=document.createElement("figure")).innerHTML='<div class="lightbox-loader"></div>';var f=document.createElement("img");f.style.opacity="0",i[e].selector.getElementsByTagName("img")[0]&&i[e].selector.getElementsByTagName("img")[0].alt?f.alt=i[e].selector.getElementsByTagName("img")[0].alt:f.alt="",f.setAttribute("src",""),f.setAttribute("data-src",i[e].selector.href),r.appendChild(f),n.captions&&((c=document.createElement("figcaption")).style.opacity="0","self"==n.captionsSelector&&i[e].selector.getAttribute(n.captionAttribute)?c.innerHTML=i[e].selector.getAttribute(n.captionAttribute):"img"==n.captionsSelector&&i[e].selector.getElementsByTagName("img")[0].getAttribute(n.captionAttribute)&&(c.innerHTML=i[e].selector.getElementsByTagName("img")[0].getAttribute(n.captionAttribute)),c.innerHTML&&(r.id="lightbox-figure-"+t,c.id="lightbox-figcaption-"+t,r.appendChild(c),s.push("lightbox-figure-"+t),v.push("lightbox-figcaption-"+t),++t)),l.appendChild(r),a[e].appendChild(l),u.appendChild(a[e])}0!==t&&(d.setAttribute("aria-labelledby",s.join(" ")),d.setAttribute("aria-describedby",v.join(" "))),!n.nav||1===o||"auto"===n.nav&&"ontouchstart"in window?(m.style.display="none",g.style.display="none"):(m.innerHTML=n.navText[0],g.innerHTML=n.navText[1]),n.counter&&1!==o||(p.style.display="none"),n.close?b.innerHTML=n.closeText:b.style.display="none"},k=function(e){"false"!==d.getAttribute("aria-hidden")&&(n.scroll||(document.documentElement.classList.add("lightbox-no-scroll"),document.body.classList.add("lightbox-no-scroll")),c=document.activeElement,l=e,r={count:0,startX:null,startY:null,moveX:null,moveY:null},z(),f(l,function(){x(l+1),x(l-1)}),y(),E(),d.setAttribute("aria-hidden","false"),L())},N=function(){"true"!==d.getAttribute("aria-hidden")&&(n.scroll||(document.documentElement.classList.remove("lightbox-no-scroll"),document.body.classList.remove("lightbox-no-scroll")),S(),d.setAttribute("aria-hidden","true"),c.focus())},B=function(e){this===m?(T(),L("left")):this===g?(A(),L("right")):(this===b||this===d&&-1!==e.target.id.indexOf("lightbox-figure-wrapper"))&&N(),e.preventDefault()},w=function(e){switch(e.keyCode){case 37:T(),L("left");break;case 39:A(),L("right");break;case 27:N()}},X=function(e){++r.count>1&&(r.multitouch=!0),r.startX=e.changedTouches[0].pageX,r.startY=e.changedTouches[0].pageY},H=function(e){s||r.multitouch||(r.moveX=e.changedTouches[0].pageX,r.moveY=e.changedTouches[0].pageY,r.moveX-r.startX>50?(s=!0,T()):r.moveX-r.startX<-50?(s=!0,A()):n.swipeClose&&r.startY-r.moveY>100&&N(),e.preventDefault())},M=function(){--r.count<=0&&(r.multitouch=!1),s=!1},Y=function(e){"false"!==d.getAttribute("aria-hidden")||d.contains(e.target)||(e.stopPropagation(),L())},z=function(){n.keyboard&&document.addEventListener("keyup",w,!1),n.docClose&&d.addEventListener("click",B,!1),m.addEventListener("click",B,!1),g.addEventListener("click",B,!1),b.addEventListener("click",B,!1),d.addEventListener("touchstart",X,!1),d.addEventListener("touchmove",H,!1),d.addEventListener("touchend",M,!1),document.addEventListener("focus",Y,!0)},S=function(){n.keyboard&&document.removeEventListener("keyup",w,!1),n.docClose&&d.removeEventListener("click",B,!1),m.removeEventListener("click",B,!1),g.removeEventListener("click",B,!1),b.removeEventListener("click",B,!1),d.removeEventListener("touchstart",X,!1),d.removeEventListener("touchmove",H,!1),d.removeEventListener("touchend",M,!1),document.removeEventListener("focus",Y,!0)};!function(e,t){t&&v(t,n);var a=document.querySelectorAll(e);[].forEach.call(a,function(e,t){if(n.zoom&&e.getElementsByTagName("img")[0]){var o=document.createElement("div");o.classList.add("lightbox-zoom-icon"),o.innerHTML=n.zoomText,e.classList.add("lightbox-zoom"),e.appendChild(o)}e.addEventListener("click",function(e){k(t),e.preventDefault()},!0),i.push({selector:e})}),o=i.length,C()}(e,t)}});