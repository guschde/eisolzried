"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function replaceSrc(a){a.src=a.dataset.src,a.removeAttribute("data-src")}function addLoaded(a){a.classList.add("loaded")}function load(a){if("VIDEO"==a.nodeName){for(var b=a.getElementsByTagName("source"),c=0;c<b.length;c++)replaceSrc(b[c]);a.load(),a.onloadstart=function(){addLoaded(a)}}else replaceSrc(a),a.onload=function(){addLoaded(a)}}function findResults(a,b){return b.filter(function(b){var c=new RegExp(a,"gi");return b.title.match(c)||b.content.match(c)})}function displayResults(){var a=findResults(this.value,pages),b=a.map(function(a){return'\n            <li><a href="'+a.url+'">'+a.title+"</a></li>"}).join("");0==a.length||""==this.value?resultsList.innerHTML="<p>Nix gfunna!</p>":resultsList.innerHTML=b}var els=document.querySelectorAll(".lazy");if("IntersectionObserver"in window){var onChange=function(b){b.forEach(function(a){a.isIntersecting&&(load(a.target),observer.unobserve(a.target),console.log("lazy loaded element"))})},observer=new IntersectionObserver(onChange,{threshold:.5});els.forEach(function(a){return observer.observe(a)})}else{console.log("Intersection Observer not supported");for(var i=0;i<els.length;i++)load(els[i])}$(".gallery a").simpleLightbox();var endpoint="/assets/search.json",pages=[];fetch(endpoint).then(function(a){return a.json()}).then(function(a){return pages.push.apply(pages,_toConsumableArray(a))});var field=document.querySelector("#search-input"),resultsList=document.querySelector("#results-container");field.addEventListener("keyup",displayResults),field.addEventListener("keypress",function(a){13==a.keyCode&&a.preventDefault()});