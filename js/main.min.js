"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function setTheme(e){var t,n,o;"light"==e?(t="dark",n="sun",o="/css/dark-theme.min.css"):(t="light",n="moon",o=""),document.getElementById("theme-link").href=o,document.getElementById("theme-icon").className="icon-"+n,localStorage.setItem("theme",t)}function findResults(e,t){return t.filter(function(t){var n=new RegExp(e,"gi");return t.title.match(n)||t.content.match(n)})}function displayResults(){var e=findResults(this.value,pages),t=e.map(function(e){return'\n            <li><a href="'+e.url+'">'+e.title+"</a></li>"}).join("");0==e.length||""==this.value?resultsList.innerHTML="<p>Nix gfunna!</p>":resultsList.innerHTML=t}var path=window.location.pathname,langBtn=document.getElementById("language-btn");-1===path.indexOf("/by/")?langBtn.onclick=function(){window.location="/by".concat(path)}:langBtn.onclick=function(){window.location=path.replace("/by","")},"dark"==localStorage.getItem("theme")?setTheme("light"):localStorage.setItem("theme","light"),document.getElementById("theme-switch").onclick=function(){setTheme(localStorage.getItem("theme"))};var els=document.querySelectorAll(".lazy");if(els.length>0){var js;!function(){var e=function(e){function t(e){e.src=e.dataset.src,e.removeAttribute("data-src")}function n(e){e.classList.add("loaded")}function o(e){if("VIDEO"==e.nodeName){for(var o=e.getElementsByTagName("source"),r=0;r<o.length;r++)t(o[r]);e.load(),e.onloadstart=function(){n(e)}}else t(e),e.onload=function(){n(e)}}function r(e){e.forEach(function(e){("boolean"==typeof e.isIntersecting?e.isIntersecting:e.intersectionRect.height>0)&&(o(e.target),i.unobserve(e.target))})}var i=new IntersectionObserver(r,{threshold:.5});e.forEach(function(e){return i.observe(e)})};"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?e(els):(console.log("Intersection Observer not supported, loading polyfill"),(js=document.createElement("script")).src="/js/intersection-observer.min.js",js.onload=function(){e(els)},js.onerror=function(){console.log("Failed to load script "+src)},document.body.appendChild(js))}()}$(".gallery a").simpleLightbox();var endpoint="/assets/search.json",pages=[];fetch(endpoint).then(function(e){return e.json()}).then(function(e){return pages.push.apply(pages,_toConsumableArray(e))});var field=document.querySelector("#search-input"),resultsList=document.querySelector("#results-container");field.addEventListener("keyup",displayResults),field.addEventListener("keypress",function(e){13==e.keyCode&&e.preventDefault()}),document.getElementById("siren-btn").onclick=function(){var e,t=document.getElementById("siren-player");t.paused?(0==t.readyState&&t.load(),t.play(),e="volume-off"):(t.pause(),e="volume-up"),document.getElementById("siren-icon").className="icon-"+e};